import{c as G,o as ee,r as we,a as y,g as ve,b as te,i as ne,u as H,d as W,e as Re,f as re,h as ye,j as Y,k as p,l as Pe,S as oe,m as be,n as $e,s as Se,p as j,q as _e,t as P,v as N,w as xe,x as k}from"./chunks/web.33a095e2.js";import{r as z}from"./chunks/routing.15437b8a.js";function Ce(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function Ae([e,t],r,n){return[r?()=>r(e()):e,n?o=>t(n(o)):t]}function Ee(e){try{return document.querySelector(e)}catch{return null}}function Le(e,t){const r=Ee(`#${e}`);r?r.scrollIntoView():t&&window.scrollTo(0,0)}function Oe(e,t,r,n){let o=!1;const s=c=>typeof c=="string"?{value:c}:c,a=Ae(G(s(e()),{equals:(c,l)=>c.value===l.value}),void 0,c=>(!o&&t(c),c));return r&&ee(r((c=e())=>{o=!0,a[1](s(c)),o=!1})),{signal:a,utils:n}}function Te(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:G({value:""})};return e}function Ie(e){return{signal:[()=>e,t=>Object.assign(e,t)]}}function je(){return Oe(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:r,state:n})=>{t?window.history.replaceState(n,"",e):window.history.pushState(n,"",e),Le(window.location.hash.slice(1),r)},e=>Ce(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}const ke=/^(?:[a-z0-9]+:)?\/\//i,Ue=/^\/+|\/+$/g;function T(e,t=!1){const r=e.replace(Ue,"");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function B(e,t,r){if(ke.test(t))return;const n=T(e),o=r&&T(r);let s="";return!o||t.startsWith("/")?s=n:o.toLowerCase().indexOf(n.toLowerCase())!==0?s=n+o:s=o,(s||"/")+T(t,!s)}function qe(e,t){if(e==null)throw new Error(t);return e}function se(e,t){return T(e).replace(/\/*(\*.*)?$/g,"")+T(t)}function Be(e){const t={};return e.searchParams.forEach((r,n)=>{t[n]=r}),t}function x(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function Ge(e,t){const[r,n]=e.split("/*",2),o=r.split("/").filter(Boolean),s=o.length;return a=>{const c=a.split("/").filter(Boolean),l=c.length-s;if(l<0||l>0&&n===void 0&&!t)return null;const i={path:s?"":"/",params:{}};for(let u=0;u<s;u++){const h=o[u],m=c[u];if(h[0]===":")i.params[h.slice(1)]=m;else if(h.localeCompare(m,void 0,{sensitivity:"base"})!==0)return null;i.path+=`/${m}`}return n&&(i.params[n]=l?c.slice(-l).join("/"):""),i}}function Ke(e){const[t,r]=e.pattern.split("/*",2),n=t.split("/").filter(Boolean);return n.reduce((o,s)=>o+(s.startsWith(":")?2:3),n.length-(r===void 0?0:1))}function ae(e){const t=new Map,r=ve();return new Proxy({},{get(n,o){return t.has(o)||we(r,()=>t.set(o,y(()=>e()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ie(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let r=e.slice(0,t.index),n=e.slice(t.index+t[0].length);const o=[r,r+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(n);)o.push(r+=t[1]),n=n.slice(t[0].length);return ie(n).reduce((s,a)=>[...s,...o.map(c=>c+a)],[])}const Ne=100,ce=te(),K=te(),F=()=>qe(H(ce),"Make sure your app is wrapped in a <Router />");let I;const M=()=>I||H(K)||F().base,He=e=>{const t=M();return y(()=>t.resolvePath(e()))},We=e=>{const t=F();return y(()=>{const r=e();return r!==void 0?t.renderPath(r):r})};function ze(e,t="",r){const{component:n,data:o,children:s}=e,a=!s||Array.isArray(s)&&!s.length,c={key:e,element:n?()=>p(n,{}):()=>{const{element:l}=e;return l===void 0&&r?p(r,{}):l},preload:e.component?n.preload:e.preload,data:o};return le(e.path).reduce((l,i)=>{for(const u of ie(i)){const h=se(t,u),m=a?h:h.split("/*",1)[0];l.push({...c,originalPath:u,pattern:m,matcher:Ge(m,!a)})}return l},[])}function Fe(e,t=0){return{routes:e,score:Ke(e[e.length-1])*1e4-t,matcher(r){const n=[];for(let o=e.length-1;o>=0;o--){const s=e[o],a=s.matcher(r);if(!a)return null;n.unshift({...a,route:s})}return n}}}function le(e){return Array.isArray(e)?e:[e]}function ue(e,t="",r,n=[],o=[]){const s=le(e);for(let a=0,c=s.length;a<c;a++){const l=s[a];if(l&&typeof l=="object"&&l.hasOwnProperty("path")){const i=ze(l,t,r);for(const u of i){if(n.push(u),l.children)ue(l.children,u.pattern,r,n,o);else{const h=Fe([...n],o.length);o.push(h)}n.pop()}}}return n.length?o:o.sort((a,c)=>c.score-a.score)}function Me(e,t){for(let r=0,n=e.length;r<n;r++){const o=e[r].matcher(t);if(o)return o}return[]}function De(e,t){const r=new URL("http://sar"),n=y(l=>{const i=e();try{return new URL(i,r)}catch{return console.error(`Invalid path ${i}`),l}},r,{equals:(l,i)=>l.href===i.href}),o=y(()=>x(n().pathname)),s=y(()=>x(n().search,!0)),a=y(()=>x(n().hash)),c=y(()=>"");return{get pathname(){return o()},get search(){return s()},get hash(){return a()},get state(){return t()},get key(){return c()},query:ae(re(s,()=>Be(n())))}}function Je(e,t="",r,n){const{signal:[o,s],utils:a={}}=Te(e),c=a.parsePath||(d=>d),l=a.renderPath||(d=>d),i=B("",t),u=ne&&n?Object.assign(n,{matches:[],url:void 0}):void 0;if(i===void 0)throw new Error(`${i} is not a valid base path`);i&&!o().value&&s({value:i,replace:!0,scroll:!1});const[h,m]=ye(),[w,f]=G(o().value),[C,A]=G(o().state),U=De(w,C),b=[],_={pattern:i,params:{},path:()=>i,outlet:()=>null,resolvePath(d){return B(i,d)}};if(r)try{I=_,_.data=r({data:void 0,params:{},location:U,navigate:V(_)})}finally{I=void 0}function J(d,g,v){Y(()=>{if(typeof g=="number"){g&&(a.go?a.go(g):console.warn("Router integration does not support relative routing"));return}const{replace:R,resolve:E,scroll:L,state:q}={replace:!1,resolve:!0,scroll:!0,...v},$=E?d.resolvePath(g):B("",g);if($===void 0)throw new Error(`Path '${g}' is not a routable path`);if(b.length>=Ne)throw new Error("Too many redirects");const S=w();if($!==S||q!==C()){const O=b.push({value:S,replace:R,scroll:L,state:C()});m(()=>{f($),A(q)}).then(()=>{b.length===O&&pe({value:$,state:q})})}})}function V(d){return d=d||H(K)||_,(g,v)=>J(d,g,v)}function pe(d){const g=b[0];g&&((d.value!==g.value||d.state!==g.state)&&s({...d,replace:g.replace,scroll:g.scroll}),b.length=0)}W(()=>{const{value:d,state:g}=o();Y(()=>{d!==w()&&m(()=>{f(d),A(g)})})});{let d=function(v){return v.namespaceURI==="http://www.w3.org/2000/svg"},g=function(v){if(v.defaultPrevented||v.button!==0||v.metaKey||v.altKey||v.ctrlKey||v.shiftKey)return;const R=v.composedPath().find(Q=>Q instanceof Node&&Q.nodeName.toUpperCase()==="A");if(!R)return;const E=d(R),L=E?R.href.baseVal:R.href;if((E?R.target.baseVal:R.target)||!L&&!R.hasAttribute("state"))return;const $=(R.getAttribute("rel")||"").split(/\s+/);if(R.hasAttribute("download")||$&&$.includes("external"))return;const S=E?new URL(L,document.baseURI):new URL(L),O=x(S.pathname);if(S.origin!==window.location.origin||i&&O&&!O.toLowerCase().startsWith(i.toLowerCase()))return;const me=c(O+x(S.search,!0)+x(S.hash)),X=R.getAttribute("state");v.preventDefault(),J(_,me,{resolve:!1,replace:R.hasAttribute("replace"),scroll:!R.hasAttribute("noscroll"),state:X&&JSON.parse(X)})};Re(["click"]),document.addEventListener("click",g),ee(()=>document.removeEventListener("click",g))}return{base:_,out:u,location:U,isRouting:h,renderPath:l,parsePath:c,navigatorFactory:V}}function Ve(e,t,r,n){const{base:o,location:s,navigatorFactory:a}=e,{pattern:c,element:l,preload:i,data:u}=n().route,h=y(()=>n().path),m=ae(()=>n().params);i&&i();const w={parent:t,pattern:c,get child(){return r()},path:h,params:m,data:t.data,outlet:l,resolvePath(f){return B(o.path(),f,h())}};if(u)try{I=w,w.data=u({data:t.data,params:m,location:s,navigate:a(w)})}finally{I=void 0}return w}const Xe=k("<a></a>"),Qe=e=>{const{source:t,url:r,base:n,data:o,out:s}=e,a=t||(ne?Ie({value:r||""}):je()),c=Je(a,n,o,s);return p(ce.Provider,{value:c,get children(){return e.children}})},Ye=e=>{const t=F(),r=M(),n=Pe(()=>e.children),o=y(()=>ue(n(),se(r.pattern,e.base||""),et)),s=y(()=>Me(o(),t.location.pathname));t.out&&t.out.matches.push(s().map(({route:i,path:u,params:h})=>({originalPath:i.originalPath,pattern:i.pattern,path:u,params:h})));const a=[];let c;const l=y(re(s,(i,u,h)=>{let m=u&&i.length===u.length;const w=[];for(let f=0,C=i.length;f<C;f++){const A=u&&u[f],U=i[f];h&&A&&U.route.key===A.route.key?w[f]=h[f]:(m=!1,a[f]&&a[f](),be(b=>{a[f]=b,w[f]=Ve(t,w[f-1]||r,()=>l()[f+1],()=>s()[f])}))}return a.splice(i.length).forEach(f=>f()),h&&m?h:(c=w[0],w)}));return p(oe,{get when(){return l()&&c},children:i=>p(K.Provider,{value:i,get children(){return i.outlet()}})})},Ze=(e,t)=>()=>p(Ye,{base:t,children:e}),et=()=>{const e=M();return p(oe,{get when(){return e.child},children:t=>p(K.Provider,{value:t,get children(){return t.outlet()}})})};function tt(e){const[,t]=Se(e,["children","to","href","state"]),r=We(()=>e.to);return(()=>{const n=j(Xe);return _e(n,t,!1,!0),P(n,()=>e.children),W(o=>{const s=r()||e.href,a=JSON.stringify(e.state);return s!==o._v$&&N(n,"href",o._v$=s),a!==o._v$2&&N(n,"state",o._v$2=a),o},{_v$:void 0,_v$2:void 0}),xe(),n})()}function he(e){const t=He(()=>e.href);return p(tt,$e(e,{get to(){return t()}}))}const nt=k("<a></a>"),rt=k("<h1>Solid title</h1>"),ot=k("<div><h1>Root Page</h1><ul><li></li><li></li><li></li></ul></div>"),st=k("<div><h1>Page 1</h1><ul><li></li><li></li><li></li></ul></div>"),Z=z+"/solid",D=[{path:Z,element:at},{path:Z+"/page1",element:it}];function fe(e){return(()=>{const t=j(nt);return P(t,()=>e.children),W(()=>N(t,"href",`javascript:window.location.href='${e.href}'`)),t})()}function de(){return p(fe,{href:`${z}/react`,children:"Go To React"})}function ge(){return p(fe,{href:z+"/",children:"Go To Home"})}function ut(){const e=Ze(D);return p(Qe,{get children(){return[j(rt),p(e,{})]}})}function at(){return(()=>{const e=j(ot),t=e.firstChild,r=t.nextSibling,n=r.firstChild,o=n.nextSibling,s=o.nextSibling;return P(n,p(he,{get href(){return D[1].path},children:"Got to Page 1"})),P(o,p(de,{})),P(s,p(ge,{})),e})()}function it(){return(()=>{const e=j(st),t=e.firstChild,r=t.nextSibling,n=r.firstChild,o=n.nextSibling,s=o.nextSibling;return P(n,p(he,{get href(){return D[0].path},children:"Go To Root"})),P(o,p(de,{})),P(s,p(ge,{})),e})()}export{ut as default};
